<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hacker Simülatörü</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            color: #00ff00; /* Klasik yeşil hacker rengi */
            font-family: 'Consolas', 'Courier New', monospace; /* Daha CMD benzeri font */
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .loader {
            font-size: 8rem;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .main-menu {
            display: none;
            text-align: center;
            width: 100%;
            padding: 20px;
        }

        .welcome {
            position: absolute;
            top: 50px;
            left: 50px;
            font-size: 2rem;
            color: #00ff00;
            text-shadow: none; /* CMD'de gölge olmaz */
        }

        .menu-options {
            font-size: 1.5rem;
            margin-top: 100px;
        }

        .menu-item {
            margin: 20px 0;
            cursor: pointer;
            padding: 10px;
            border: 2px solid transparent;
            transition: all 0.1s; /* Daha hızlı geçiş */
        }

        .menu-item:hover {
            border: 2px solid #00ff00;
            background: rgba(0, 255, 0, 0.1);
            text-shadow: 0 0 5px #00ff00; /* Hafif bir parıltı bırakabiliriz */
        }

        .game-screen {
            display: none;
            padding: 10px; /* Daha az padding, CMD hissi için */
            width: 95%; /* Biraz daha dar */
            height: 95vh; /* Yüksekliği ekranın büyük kısmını kaplasın */
            overflow-y: auto;
            background: #000; /* Tamamen siyah */
            color: #00ff00;
            border: none; /* Çerçeve yok */
            border-radius: 0; /* Köşeler düz */
            box-shadow: none; /* Gölge yok */
        }

        .terminal {
            background: #000; /* Tamamen siyah */
            padding: 0; /* Kendi iç padding'i olmayacak */
            border-radius: 0;
            min-height: 100%; /* Tam yüksekliği kaplasın */
            box-shadow: none;
        }

        .story-text {
            font-size: 1.1rem; /* Hafif küçültme */
            line-height: 1.5;
            margin-bottom: 10px;
            white-space: pre-wrap;
            word-break: break-word; /* Uzun kelimeleri kır */
            padding: 0 5px; /* Kenarlardan biraz boşluk */
        }

        .input-area {
            margin-top: 10px;
            display: flex;
            align-items: flex-start; /* Prompt üstte kalsın */
            padding: 0 5px;
        }

        .prompt {
            color: #ffffff; /* Prompt beyaz olsun (CMD'de genelde beyaz veya açık gri) */
            margin-right: 8px;
            flex-shrink: 0; /* Prompt küçülmesin */
            font-weight: bold; /* Daha belirgin */
        }

        input {
            background: transparent;
            border: none;
            color: #00ff00;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 1.1rem;
            outline: none;
            flex: 1;
            caret-color: #00ff00;
            padding: 0; /* Ekstra padding olmasın */
        }

        .back-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: transparent;
            border: 1px solid #ff0000; /* İnce kırmızı çerçeve */
            color: #ff0000;
            padding: 5px 10px;
            cursor: pointer;
            font-family: 'Consolas', 'Courier New', monospace;
            border-radius: 0; /* Düz köşeler */
            transition: all 0.1s;
            z-index: 10;
        }

        .back-btn:hover {
            background: rgba(255, 0, 0, 0.2); /* Hafif kırmızı vurgu */
            text-shadow: none;
        }

        .developer-screen {
            display: none;
            text-align: center;
            padding: 50px;
        }

        .dev-info {
            font-size: 1.8rem; /* Biraz küçültme */
            margin-bottom: 30px;
            text-shadow: none;
        }

        .cursor {
            animation: blink 1s infinite;
        }

        @keyframes blink {
            50% { opacity: 0; }
        }

        .matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.07; /* Daha az belirgin */
        }

        .mission-status {
            border: none; /* Çerçeve yok */
            padding: 10px 5px; /* Minimal padding */
            margin: 10px 0;
            background: transparent; /* Arka plan yok */
        }

        .success {
            color: #00ff00;
        }

        .warning {
            color: #ffff00;
        }

        .error {
            color: #ff0000;
        }

        /* İndirme çubuğu stili */
        .progress-bar {
            width: 100%;
            background-color: #333;
            border: 1px solid #00ff00;
            height: 20px;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background-color: #00ff00;
            transition: width 0.1s linear; /* Yumuşak geçiş */
        }
    </style>
</head>
<body>
    <canvas class="matrix-bg" id="matrix"></canvas>

    <div class="container">
        <div class="loader" id="loader">/</div>

        <div class="main-menu" id="mainMenu">
            <div class="welcome">Hoş Geldiniz!</div>
            <div class="menu-options">
                <div class="menu-item" onclick="startGame()">1) Oyuna Başla</div>
                <div class="menu-item" onclick="showDeveloper()">2) Geliştirici</div>
            </div>
        </div>

        <div class="game-screen" id="gameScreen">
            <button class="back-btn" onclick="goBack()">← Geri</button>
            <div class="terminal">
                <div class="story-text" id="storyText"></div>
                <div class="input-area" id="inputArea" style="display: none;">
                    <span class="prompt">C:\USERS\HACKER&gt;</span>
                    <input type="text" id="commandInput" onkeypress="handleCommand(event)" placeholder="">
                </div>
                <div class="mission-status" id="missionStatus" style="display: none;"></div>
                <div class="download-status" id="downloadStatus" style="display: none;">
                    <div class="story-text" id="downloadText"></div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="developer-screen" id="developerScreen">
            <button class="back-btn" onclick="goBack()">← Geri</button>
            <div class="dev-info">
                <div>🔰 Geliştirici Bilgileri 🔰</div>
                <br>
                <div style="font-size: 1.5rem;">
                    <div>👨‍💻 Yekta Demirkol</div>
                    <br>
                    <div style="color: #ffff00;">Cybersecurity Specialist</div>
                    <div style="color: #ff00ff;">Ethical Hacker & Developer</div>
                    <br>
                    <div style="font-size: 1rem; color: #00ffff;">
                        "Güvenliğin sınırlarını keşfetmek için kodluyorum"
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStoryIndex = 0;
        let isDownloading = false;
        let downloadProgress = 0;
        const DOWNLOAD_DURATION = 120000; // 2 dakika (miliseconds)
        const DOWNLOAD_INTERVAL = 100; // Her 100ms'de bir güncelle

        // Matrix efekti
        const canvas = document.getElementById('matrix');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const characters = '01ｱｲｳｴｵｶｷｸｹｺｻｼｽｾｿﾀﾁﾂﾃﾄﾅﾆﾇﾈﾉﾊﾋﾌﾍﾎﾏﾐﾑﾒﾓﾔﾕﾖﾗﾘﾙﾚﾛﾜﾝ'; // Japon Katakana ve sayılar
        const fontSize = 14;
        const columns = canvas.width / fontSize;
        const drops = [];

        for (let i = 0; i < columns; i++) {
            drops[i] = 1;
        }

        function drawMatrix() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#00ff00';
            ctx.font = fontSize + 'px courier new';

            for (let i = 0; i < drops.length; i++) {
                const text = characters.charAt(Math.floor(Math.random() * characters.length));
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                if (drops[i] * fontSize * 0.8 > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }

        setInterval(drawMatrix, 35);

        // Ses çalma fonksiyonu
        // NOT: Ses dosyalarınızın (örneğin audio_intro.wav, audio_story_1.wav vb.)
        // index.html dosyasıyla AYNI DİZİNDE olduğundan emin olun.
        // GitHub Pages'da bu şekilde sorunsuz çalışacaktır.
        function playAudio(audioName) {
            console.log(`Playing audio: ${audioName}.wav`);
            try {
                const audio = new Audio(`${audioName}.wav`);
                audio.volume = 0.5; // Ses seviyesini ayarlayabilirsiniz
                audio.play().catch(e => {
                    console.warn(`Audio play failed for ${audioName}.wav:`, e);
                    // Oynatma hatası, genellikle kullanıcı etkileşimi olmadan otomatik oynatma denemesi
                    // Tarayıcılar bu konuda kısıtlayıcıdır. İlk kullanıcı tıklamasından sonra daha iyi çalışır.
                });
            } catch (error) {
                console.error(`Error creating Audio object for ${audioName}.wav:`, error);
            }
        }

        // Başlangıç yüklemesi
        setTimeout(() => {
            document.getElementById('loader').style.display = 'none';
            document.getElementById('mainMenu').style.display = 'block';
            playAudio('audio_intro'); // Ses dosyası: audio_intro.wav
        }, 3000);

        function startGame() {
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            playAudio('audio_start_game'); // Ses dosyası: audio_start_game.wav
            startStory();
        }

        function showDeveloper() {
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('developerScreen').style.display = 'block';
        }

        function goBack() {
            document.getElementById('gameScreen').style.display = 'none';
            document.getElementById('developerScreen').style.display = 'none';
            document.getElementById('mainMenu').style.display = 'block';
            currentStoryIndex = 0;
            document.getElementById('inputArea').style.display = 'none';
            document.getElementById('missionStatus').style.display = 'none';
            document.getElementById('downloadStatus').style.display = 'none'; // İndirme durumunu sıfırla
            isDownloading = false;
            downloadProgress = 0;
            document.getElementById('progressFill').style.width = '0%';
        }

        const storyTexts = [
            {
                text: "SİSTEM BAŞLATILIYOR...\n\n[UYARI] Yetkisiz erişim tespit edildi.\n[BİLGİ] Güvenlik protokolleri devreye alınıyor...\n\nHoş geldin, genç hacker.\n\nBenim adım GHOST, siber dünyanın en gizli organizasyonunun yapay zekası. Seni buraya getiren sebep basit: dünyanın en büyük korporasyonu NEXUS CORP'un karanlık sırlarını açığa çıkarmak.\n\nİlk görevin: onların güvenlik duvarını aşmak ve gizli dosyalarına erişim sağlamak.\n\nHazır mısın? (Devam etmek için ENTER'a basın)",
                audio: "audio_story_1"
            },
            {
                text: "GÖREV 1: GİRİŞ KAPISI\n\n[SİSTEM] Target: nexus-corp.com:443\n[DURUM] Hedef sunucu taranıyor...\n\nTarama tamamlandı. Açık portlar tespit edildi:\n- Port 22 (SSH) - AÇIK\n- Port 80 (HTTP) - AÇIK  \n- Port 443 (HTTPS) - AÇIK\n- Port 3389 (RDP) - FİLTRELİ\n\nHangi portu kullanarak saldırıya geçmek istiyorsun?\nKomut gir: port [numara]",
                audio: "audio_story_2"
            },
            {
                text: "MÜKEMMEL SEÇİM!\n\n[SİSTEM] Port 22 üzerinden SSH bağlantısı kuruluyor...\n[BAŞARILI] Bağlantı kuruldu!\n\nŞimdi sisteme giriş yapmak için kullanıcı adı ve şifre bulmamız gerekiyor.\nSQL injection saldırısı başlatılıyor...\n\n[PAYLOAD] admin' OR '1'='1' --\n[SONUÇ] Giriş başarılı!\n\n**NEXUS CORP GİZLİ ARŞİVİ ERİŞİLDİ**\n\nİçeride neler var bakalım...\nKomut: 'ls' yazarak dosyaları listele",
                audio: "audio_story_3"
            },
            {
                text: "DOSYA LİSTESİ:\n\n📁 classified_projects/\n📁 financial_records/\n📁 employee_data/\n📁 secret_experiments/\n📄 master_plan.txt\n📄 backdoor_access.log\n\n[GHOST] Burada çok kritik bilgiler var. 'secret_experiments' klasörü çok şüpheli görünüyor.\n\nHangi dosyayı incelemek istiyorsın?\nKomut: 'open [dosya_adı]' şeklinde yaz",
                audio: "audio_story_4"
            },
            {
                text: "DOSYA AÇILIYOR: secret_experiments/\n\n🔴 ÜST GİZLİ - PROJE PANDORA 🔴\n\n[İÇERİK]\n- İnsan beynini kontrol eden nanobotlar\n- Küresel internet ağına hakimiyet projesi\n- Hükümetlerin gizli veritabanlarına erişim\n- Dünya geneli surveillance sistemi\n\n[GHOST] Bu korkunç! NEXUS CORP tüm dünyayı kontrol etmeye çalışıyor!\n\nBu bilgileri güvenli bir yere yedeklememiz gerekiyor.\nKomut: 'download all' yazarak tüm verileri indir",
                audio: "audio_story_5"
            },
            {
                text: "VERİLER İNDİRİLİYOR...\nLütfen bekle. Bu işlem biraz zaman alabilir.\n", // İndirme metni kısaldı
                audio: "audio_download_start"
            },
            {
                text: "✅ TÜM DOSYALAR GÜVENLİ SUNUCUYA YEDEKLENDİ!\n\n[UYARI] Sistem yöneticisi şüpheli aktivite tespit etti!\n[ACİL] IP adresin izleniyor!\n\n[GHOST] Hızlı ol! Şimdi indirdiğimiz verileri analiz etmeliyiz. Neyin içine bulaştığımızı tam olarak anlamak için kritik bir adım.\n\nKomut: 'analyze data' yazarak verileri analiz et",
                audio: "audio_story_6"
            },
            {
                text: "VERİ ANALİZİ BAŞLATILIYOR...\n\n[SİSTEM] Şifreleme algoritmaları çözülüyor...\n[DURUM] Derinlemesine tarama yapılıyor...\n\n[ANALİZ SONUCU] NEXUS CORP'un sadece nanobot projesi değil, aynı zamanda küresel finans piyasalarını manipüle eden 'Project Midas' adında bir girişimi daha var!\n\n[GHOST] Bu bilgi çok değerli! Ama izimizi kaybettirmeliyiz. Sistemdeki logları ve bağlantı kayıtlarını temizlememiz şart.\n\nKomut: 'clear logs' yazarak izlerini sil",
                audio: "audio_story_7"
            },
            {
                text: "İZ SİLME İŞLEMİ BAŞLATILIYOR...\n\n[SİSTEM] Bağlantı logları siliniyor...\n[SİSTEM] Geçici dosyalar temizleniyor...\n[BAŞARILI] Tüm dijital ayak izlerin silindi!\n\n[UYARI] NEXUS CORP'un güvenlik önlemleri artırıldı! Yeni bir anti-hacker protokolü aktifleşti!\n\n[GHOST] Mükemmel zamanlama. Son bir görevimiz var: Acil durum kaçış protokolünü etkinleştirmek ve sistemden güvenle çıkmak. Aksi takdirde yakalanabiliriz!\n\nKomut: 'escape now' yazarak acil çıkış protokolünü başlat",
                audio: "audio_story_8"
            },
            {
                text: "ACİL ÇIKIŞ PROTOKOLÜ BAŞLATILIYOR...\n\n[GHOST] Başardın, genç hacker! NEXUS CORP'u ifşa etme yolunda çok önemli bir adım attın ve kendini de güvende tuttun. Dünya sana minnettar.\n\nBu sadece başlangıç. Gelecekte daha büyük görevler seni bekliyor olabilir.\n\nSİSTEM KAPATILIYOR...",
                audio: "audio_final"
            }
        ];

        function typeText(text, elementId, callback) {
            const element = document.getElementById(elementId);
            element.innerHTML = '';
            let i = 0;

            function typeChar() {
                if (i < text.length) {
                    if (text[i] === '\n') {
                        element.innerHTML += '<br>';
                    } else {
                        element.innerHTML += text[i];
                    }
                    i++;
                    setTimeout(typeChar, 30 + Math.random() * 20);
                } else {
                    const existingCursor = element.querySelector('.cursor');
                    if (existingCursor) existingCursor.remove();
                    // input alanı görünür olduğunda cursoru input'a ekle
                    if (elementId === 'storyText' && document.getElementById('inputArea').style.display === 'flex') {
                        document.getElementById('commandInput').focus(); // Input'a odaklan
                    } else {
                        element.innerHTML += '<span class="cursor">_</span>';
                    }
                    if (callback) callback();
                }
            }
            typeChar();
        }

        function startStory() {
            if (currentStoryIndex < storyTexts.length) {
                const story = storyTexts[currentStoryIndex];
                playAudio(story.audio);

                // İndirme aşaması özel olarak ele alınıyor
                if (currentStoryIndex === 5) { // "download all" komutundan sonraki indeks
                    isDownloading = true;
                    document.getElementById('inputArea').style.display = 'none';
                    document.getElementById('downloadStatus').style.display = 'block';
                    document.getElementById('downloadText').innerText = story.text;
                    startDownloadSimulation();
                } else if (currentStoryIndex === 0 || currentStoryIndex === storyTexts.length - 1 || currentStoryIndex === storyTexts.length - 2) {
                    // İlk giriş, son kapanış ve sondan bir önceki (escape now) otomatik devam etmeli
                    typeText(story.text, 'storyText', () => {
                        document.getElementById('inputArea').style.display = 'none';
                        setTimeout(() => {
                            currentStoryIndex++;
                            if (currentStoryIndex < storyTexts.length) {
                                startStory();
                            } else {
                                alert('Tebrikler! Başarıyla tüm görevleri tamamladın ve dünyayı büyük bir tehlikeden korudun!');
                                goBack();
                            }
                        }, 2500);
                    });
                } else {
                    typeText(story.text, 'storyText', () => {
                        document.getElementById('inputArea').style.display = 'flex';
                        document.getElementById('commandInput').focus();
                    });
                }
            }
        }

        function startDownloadSimulation() {
            let startTime = Date.now();
            let interval = setInterval(() => {
                let elapsedTime = Date.now() - startTime;
                downloadProgress = (elapsedTime / DOWNLOAD_DURATION) * 100;
                
                document.getElementById('progressFill').style.width = `${downloadProgress}%`;
                
                // İndirme metnini yüzde ile güncelle
                document.getElementById('downloadText').innerText = `VERİLER İNDİRİLİYOR...\nLütfen bekle. İlerleme: %${Math.floor(downloadProgress)}`;

                if (downloadProgress >= 100) {
                    clearInterval(interval);
                    isDownloading = false;
                    document.getElementById('downloadStatus').style.display = 'none';
                    document.getElementById('missionStatus').style.display = 'block';
                    document.getElementById('missionStatus').innerHTML = '<span class="success">✅ İNDİRME TAMAMLANDI!</span>';
                    setTimeout(() => {
                        currentStoryIndex++;
                        startStory();
                        document.getElementById('missionStatus').style.display = 'none';
                    }, 1500);
                }
            }, DOWNLOAD_INTERVAL);
        }


        function handleCommand(event) {
            if (event.key === 'Enter' && !isDownloading) {
                const command = event.target.value.toLowerCase().trim();
                const missionStatus = document.getElementById('missionStatus');
                event.target.value = '';

                let commandHandled = false;

                if (currentStoryIndex === 1 && command.includes('port')) {
                    missionStatus.style.display = 'block';
                    missionStatus.innerHTML = '<span class="success">✅ PORT SALDIRISI BAŞARILI!</span>';
                    commandHandled = true;
                }
                else if (currentStoryIndex === 2 && command === 'ls') {
                    missionStatus.style.display = 'block';
                    missionStatus.innerHTML = '<span class="success">✅ DOSYA LİSTESİ ALINDI!</span>';
                    commandHandled = true;
                }
                else if (currentStoryIndex === 3 && command.includes('open')) {
                    missionStatus.style.display = 'block';
                    missionStatus.innerHTML = '<span class="warning">⚠️ GİZLİ DOSYALAR ERİŞİLDİ!</span>';
                    commandHandled = true;
                }
                else if (currentStoryIndex === 4 && command.includes('download all')) {
                    missionStatus.style.display = 'block';
                    missionStatus.innerHTML = '<span class="success">✅ İNDİRME BAŞLATILIYOR...</span>';
                    commandHandled = true;
                }
                else if (currentStoryIndex === 6 && command.includes('analyze data')) { // İndirme bittikten sonraki indeks
                    missionStatus.style.display = 'block';
                    missionStatus.innerHTML = '<span class="success">✅ VERİ ANALİZİ BAŞLADI!</span>';
                    commandHandled = true;
                }
                else if (currentStoryIndex === 7 && command.includes('clear logs')) {
                    missionStatus.style.display = 'block';
                    missionStatus.innerHTML = '<span class="success">✅ İZLER TEMİZLENİYOR!</span>';
                    commandHandled = true;
                }
                else if (currentStoryIndex === 8 && command.includes('escape now')) {
                    missionStatus.style.display = 'block';
                    missionStatus.innerHTML = '<span class="success">🎉 ACİL ÇIKIŞ BAŞARILI!</span>';
                    commandHandled = true;
                }
                else {
                    missionStatus.style.display = 'block';
                    missionStatus.innerHTML = '<span class="error">❌ GEÇERSİZ KOMUT! Tekrar dene.</span>';
                    setTimeout(() => {
                        missionStatus.style.display = 'none';
                    }, 2000);
                    commandHandled = false;
                }

                if (commandHandled) {
                    document.getElementById('inputArea').style.display = 'none';
                    setTimeout(() => {
                        currentStoryIndex++;
                        startStory();
                        missionStatus.style.display = 'none';
                    }, 1500);
                }
            }
        }

        // Pencere yeniden boyutlandırıldığında canvas'ı güncelle
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
